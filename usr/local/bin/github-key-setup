#!/usr/bin/env ash

[[ "$1" ]] || {
  echo "${0##*/} <mailbox>"
  return
}

eval "$(ssh-agent)"
ssh-keygen -t ed25519 -C "$1"
# should check if ssh-agent is running...
# strange problem ssh-agent vanish from user control when started
# with hidepid=2, it still show the right user in process list viewed by root. 
ssh-add ~/.ssh/id_ed25519
cat ~/.ssh/id_ed25519.pub

